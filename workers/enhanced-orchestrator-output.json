{
  "workflowName": "AI-Powered Customer Support Automation",
  "description": "This workflow automates the process of handling customer inquiries via email, categorizing them, tracking in Google Sheets, storing in Airtable with enriched data, and responding with personalized AI-generated responses.",
  "complexity": "high",
  "estimatedProcessingTime": "2-5 minutes",
  "triggers": [
    {
      "type": "gmail",
      "name": "New Email Trigger",
      "configuration": {
        "credentials": "gmail_credentials",
        "mailbox": "support@company.com",
        "folder": "INBOX",
        "filter": "has:attachment OR subject:(inquiry OR support)",
        "markAsRead": false
      }
    }
  ],
  "steps": [
    {
      "id": "email_analysis",
      "name": "AI Email Classification",
      "type": "openai",
      "description": "This step uses AI to classify the email and extract relevant data.",
      "configuration": {
        "operation": "text_completion",
        "model": "gpt-3.5-turbo",
        "prompt": "Analyze this email and classify it. Extract: priority (high/medium/low), category (billing/technical/general), customer_sentiment (positive/neutral/negative), main_issue (brief description). Email content: {{ $json.body }}",
        "temperature": 0.1,
        "maxTokens": 150
      },
      "inputFrom": ["New Email Trigger"],
      "outputTo": ["sheets_update"],
      "errorHandling": {
        "onError": "retry",
        "maxRetries": 3
      }
    },
    {
      "id": "sheets_update", 
      "name": "Google Sheets Tracking",
      "type": "googleSheets",
      "description": "This step logs the email and its classification in Google Sheets.",
      "configuration": {
        "operation": "append",
        "sheetId": "{{ $env.GOOGLE_SHEETS_ID }}",
        "range": "A:F",
        "values": [
          "{{ $json.timestamp }}",
          "{{ $json.from }}",
          "{{ $json.subject }}",
          "{{ $json.ai_classification.priority }}",
          "{{ $json.ai_classification.category }}",
          "{{ $json.ai_classification.sentiment }}"
        ]
      },
      "inputFrom": ["email_analysis"],
      "outputTo": ["airtable_record"],
      "errorHandling": {
        "onError": "continue",
        "maxRetries": 2
      }
    },
    {
      "id": "airtable_record",
      "name": "Airtable Record Creation", 
      "type": "airtable",
      "description": "This step creates a new record in Airtable with the enriched customer data.",
      "configuration": {
        "operation": "create",
        "table": "Customer_Inquiries",
        "base": "{{ $env.AIRTABLE_BASE_ID }}",
        "fields": {
          "Email": "{{ $json.from }}",
          "Subject": "{{ $json.subject }}",
          "Priority": "{{ $json.ai_classification.priority }}",
          "Category": "{{ $json.ai_classification.category }}",
          "Sentiment": "{{ $json.ai_classification.sentiment }}",
          "Main_Issue": "{{ $json.ai_classification.main_issue }}",
          "Status": "Processing",
          "Received_At": "{{ $json.timestamp }}"
        }
      },
      "inputFrom": ["sheets_update"],
      "outputTo": ["ai_response"],
      "errorHandling": {
        "onError": "retry",
        "maxRetries": 2
      }
    },
    {
      "id": "ai_response",
      "name": "AI Response Generation",
      "type": "openai", 
      "description": "This step generates a personalized response based on the email classification.",
      "configuration": {
        "operation": "text_completion",
        "model": "gpt-3.5-turbo",
        "prompt": "Generate a professional, helpful email response for a {{ $json.ai_classification.priority }} priority {{ $json.ai_classification.category }} inquiry. Customer sentiment: {{ $json.ai_classification.sentiment }}. Main issue: {{ $json.ai_classification.main_issue }}. Be empathetic and provide actionable next steps.",
        "temperature": 0.3,
        "maxTokens": 300
      },
      "inputFrom": ["airtable_record"],
      "outputTo": ["send_reply"],
      "errorHandling": {
        "onError": "retry",
        "maxRetries": 3
      }
    },
    {
      "id": "send_reply",
      "name": "Email Reply",
      "type": "gmail",
      "description": "This step sends an email reply with the AI-generated response.",
      "configuration": {
        "operation": "send",
        "to": "{{ $json.from }}",
        "subject": "Re: {{ $json.subject }}",
        "body": "{{ $json.ai_response }}\n\nBest regards,\nCustomer Support Team",
        "credentials": "gmail_credentials"
      },
      "inputFrom": ["ai_response"],
      "outputTo": [],
      "errorHandling": {
        "onError": "retry",
        "maxRetries": 2
      }
    }
  ],
  "connections": [
    {
      "from": "New Email Trigger",
      "to": "email_analysis"
    },
    {
      "from": "email_analysis", 
      "to": "sheets_update"
    },
    {
      "from": "sheets_update",
      "to": "airtable_record" 
    },
    {
      "from": "airtable_record",
      "to": "ai_response"
    },
    {
      "from": "ai_response",
      "to": "send_reply"
    }
  ],
  "errorHandling": {
    "strategy": "retry-with-notification",
    "notifications": ["slack"],
    "fallbackActions": [
      "Forward to support team",
      "Log in error sheet"
    ]
  },
  "expectedOutcomes": {
    "timeReduction": "Reduces the time spent on handling customer inquiries by 80%",
    "accuracyImprovement": "Improves the accuracy of email classification and response by 90%", 
    "scalabilityBenefit": "Allows handling of an unlimited number of customer inquiries without additional manpower"
  },
  "meta": {
    "generatedAt": "2025-08-10T07:07:05.627Z",
    "generatedBy": "Enhanced Orchestrator with MCP",
    "mcpEnhanced": true,
    "sophisticatedPlanning": true,
    "nodeTypes": ["gmail", "openai", "googleSheets", "airtable"],
    "integrationCount": 4,
    "aiNodes": 2
  }
}