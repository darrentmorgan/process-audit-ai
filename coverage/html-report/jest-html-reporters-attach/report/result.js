window.jest_html_reporters_callback__({"numFailedTestSuites":0,"numFailedTests":0,"numPassedTestSuites":2,"numPassedTests":61,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":2,"numTotalTests":61,"startTime":1757544357228,"success":false,"testResults":[{"numFailingTests":0,"numPassingTests":34,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1757544357415,"runtime":158,"slow":false,"start":1757544357257},"testFilePath":"/Users/darrenmorgan/AI_Projects/process-audit-ai/__tests__/services/pdf/PDFBrandingService.test.js","failureMessage":null,"testResults":[{"ancestorTitles":["PDFBrandingService","initialization"],"duration":2,"failureMessages":[],"fullName":"PDFBrandingService initialization should initialize with default branding","status":"passed","title":"should initialize with default branding"},{"ancestorTitles":["PDFBrandingService","initialization"],"duration":1,"failureMessages":[],"fullName":"PDFBrandingService initialization should initialize with custom branding","status":"passed","title":"should initialize with custom branding"},{"ancestorTitles":["PDFBrandingService","branding application"],"duration":0,"failureMessages":[],"fullName":"PDFBrandingService branding application should apply default branding to options","status":"passed","title":"should apply default branding to options"},{"ancestorTitles":["PDFBrandingService","branding application"],"duration":1,"failureMessages":[],"fullName":"PDFBrandingService branding application should preserve existing options when applying branding","status":"passed","title":"should preserve existing options when applying branding"},{"ancestorTitles":["PDFBrandingService","branding application"],"duration":0,"failureMessages":[],"fullName":"PDFBrandingService branding application should allow branding override in options","status":"passed","title":"should allow branding override in options"},{"ancestorTitles":["PDFBrandingService","branding application"],"duration":0,"failureMessages":[],"fullName":"PDFBrandingService branding application should calculate branded margins","status":"passed","title":"should calculate branded margins"},{"ancestorTitles":["PDFBrandingService","organization branding"],"duration":0,"failureMessages":[],"fullName":"PDFBrandingService organization branding should get default branding for null organization","status":"passed","title":"should get default branding for null organization"},{"ancestorTitles":["PDFBrandingService","organization branding"],"duration":0,"failureMessages":[],"fullName":"PDFBrandingService organization branding should attempt to fetch organization branding","status":"passed","title":"should attempt to fetch organization branding"},{"ancestorTitles":["PDFBrandingService","organization branding"],"duration":0,"failureMessages":[],"fullName":"PDFBrandingService organization branding should cache organization branding","status":"passed","title":"should cache organization branding"},{"ancestorTitles":["PDFBrandingService","organization branding"],"duration":0,"failureMessages":[],"fullName":"PDFBrandingService organization branding should fall back to default on organization fetch error","status":"passed","title":"should fall back to default on organization fetch error"},{"ancestorTitles":["PDFBrandingService","organization branding"],"duration":22,"failureMessages":[],"fullName":"PDFBrandingService organization branding should register custom branding for organization","status":"passed","title":"should register custom branding for organization"},{"ancestorTitles":["PDFBrandingService","color palette generation"],"duration":1,"failureMessages":[],"fullName":"PDFBrandingService color palette generation should generate color palette from branding","status":"passed","title":"should generate color palette from branding"},{"ancestorTitles":["PDFBrandingService","color palette generation"],"duration":0,"failureMessages":[],"fullName":"PDFBrandingService color palette generation should use default colors when branding colors missing","status":"passed","title":"should use default colors when branding colors missing"},{"ancestorTitles":["PDFBrandingService","font configuration"],"duration":0,"failureMessages":[],"fullName":"PDFBrandingService font configuration should get font configuration from branding","status":"passed","title":"should get font configuration from branding"},{"ancestorTitles":["PDFBrandingService","font configuration"],"duration":0,"failureMessages":[],"fullName":"PDFBrandingService font configuration should use default font when not specified","status":"passed","title":"should use default font when not specified"},{"ancestorTitles":["PDFBrandingService","font configuration"],"duration":1,"failureMessages":[],"fullName":"PDFBrandingService font configuration should have consistent font sizes","status":"passed","title":"should have consistent font sizes"},{"ancestorTitles":["PDFBrandingService","logo configuration"],"duration":0,"failureMessages":[],"fullName":"PDFBrandingService logo configuration should return null for missing logo","status":"passed","title":"should return null for missing logo"},{"ancestorTitles":["PDFBrandingService","logo configuration"],"duration":0,"failureMessages":[],"fullName":"PDFBrandingService logo configuration should process base64 logo","status":"passed","title":"should process base64 logo"},{"ancestorTitles":["PDFBrandingService","logo configuration"],"duration":1,"failureMessages":[],"fullName":"PDFBrandingService logo configuration should handle logo processing errors gracefully","status":"passed","title":"should handle logo processing errors gracefully"},{"ancestorTitles":["PDFBrandingService","logo configuration"],"duration":0,"failureMessages":[],"fullName":"PDFBrandingService logo configuration should set default logo dimensions","status":"passed","title":"should set default logo dimensions"},{"ancestorTitles":["PDFBrandingService","branding validation"],"duration":0,"failureMessages":[],"fullName":"PDFBrandingService branding validation should validate hex colors correctly","status":"passed","title":"should validate hex colors correctly"},{"ancestorTitles":["PDFBrandingService","branding validation"],"duration":1,"failureMessages":[],"fullName":"PDFBrandingService branding validation should remove invalid hex colors","status":"passed","title":"should remove invalid hex colors"},{"ancestorTitles":["PDFBrandingService","branding validation"],"duration":1,"failureMessages":[],"fullName":"PDFBrandingService branding validation should remove invalid company name","status":"passed","title":"should remove invalid company name"},{"ancestorTitles":["PDFBrandingService","branding validation"],"duration":1,"failureMessages":[],"fullName":"PDFBrandingService branding validation should validate various hex color formats","status":"passed","title":"should validate various hex color formats"},{"ancestorTitles":["PDFBrandingService","caching behavior"],"duration":1,"failureMessages":[],"fullName":"PDFBrandingService caching behavior should cache organization branding","status":"passed","title":"should cache organization branding"},{"ancestorTitles":["PDFBrandingService","caching behavior"],"duration":0,"failureMessages":[],"fullName":"PDFBrandingService caching behavior should clear cache successfully","status":"passed","title":"should clear cache successfully"},{"ancestorTitles":["PDFBrandingService","caching behavior"],"duration":0,"failureMessages":[],"fullName":"PDFBrandingService caching behavior should use cached branding on second request","status":"passed","title":"should use cached branding on second request"},{"ancestorTitles":["PDFBrandingService","statistics"],"duration":0,"failureMessages":[],"fullName":"PDFBrandingService statistics should provide branding statistics","status":"passed","title":"should provide branding statistics"},{"ancestorTitles":["PDFBrandingService","statistics"],"duration":0,"failureMessages":[],"fullName":"PDFBrandingService statistics should update cache statistics","status":"passed","title":"should update cache statistics"},{"ancestorTitles":["PDFBrandingService","edge cases and error handling"],"duration":1,"failureMessages":[],"fullName":"PDFBrandingService edge cases and error handling should handle null branding input","status":"passed","title":"should handle null branding input"},{"ancestorTitles":["PDFBrandingService","edge cases and error handling"],"duration":0,"failureMessages":[],"fullName":"PDFBrandingService edge cases and error handling should handle undefined branding input","status":"passed","title":"should handle undefined branding input"},{"ancestorTitles":["PDFBrandingService","edge cases and error handling"],"duration":0,"failureMessages":[],"fullName":"PDFBrandingService edge cases and error handling should handle empty branding object","status":"passed","title":"should handle empty branding object"},{"ancestorTitles":["PDFBrandingService","edge cases and error handling"],"duration":0,"failureMessages":[],"fullName":"PDFBrandingService edge cases and error handling should handle organization branding fetch failure gracefully","status":"passed","title":"should handle organization branding fetch failure gracefully"},{"ancestorTitles":["PDFBrandingService","edge cases and error handling"],"duration":0,"failureMessages":[],"fullName":"PDFBrandingService edge cases and error handling should handle partial branding objects","status":"passed","title":"should handle partial branding objects"}]},{"numFailingTests":0,"numPassingTests":27,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1757544357449,"runtime":31,"slow":false,"start":1757544357418},"testFilePath":"/Users/darrenmorgan/AI_Projects/process-audit-ai/__tests__/services/pdf/PDFTemplateEngine.test.js","failureMessage":null,"testResults":[{"ancestorTitles":["PDFTemplateEngine","initialization"],"duration":0,"failureMessages":[],"fullName":"PDFTemplateEngine initialization should initialize with default templates","status":"passed","title":"should initialize with default templates"},{"ancestorTitles":["PDFTemplateEngine","initialization"],"duration":0,"failureMessages":[],"fullName":"PDFTemplateEngine initialization should initialize with custom templates","status":"passed","title":"should initialize with custom templates"},{"ancestorTitles":["PDFTemplateEngine","initialization"],"duration":1,"failureMessages":[],"fullName":"PDFTemplateEngine initialization should have default templates for all document types","status":"passed","title":"should have default templates for all document types"},{"ancestorTitles":["PDFTemplateEngine","template retrieval"],"duration":0,"failureMessages":[],"fullName":"PDFTemplateEngine template retrieval should get default template for document type","status":"passed","title":"should get default template for document type"},{"ancestorTitles":["PDFTemplateEngine","template retrieval"],"duration":1,"failureMessages":[],"fullName":"PDFTemplateEngine template retrieval should get SOP document template","status":"passed","title":"should get SOP document template"},{"ancestorTitles":["PDFTemplateEngine","template retrieval"],"duration":0,"failureMessages":[],"fullName":"PDFTemplateEngine template retrieval should get executive summary template","status":"passed","title":"should get executive summary template"},{"ancestorTitles":["PDFTemplateEngine","template retrieval"],"duration":7,"failureMessages":[],"fullName":"PDFTemplateEngine template retrieval should throw error for unsupported document type","status":"passed","title":"should throw error for unsupported document type"},{"ancestorTitles":["PDFTemplateEngine","template retrieval"],"duration":1,"failureMessages":[],"fullName":"PDFTemplateEngine template retrieval should use custom template when provided","status":"passed","title":"should use custom template when provided"},{"ancestorTitles":["PDFTemplateEngine","template caching"],"duration":0,"failureMessages":[],"fullName":"PDFTemplateEngine template caching should cache templates after first retrieval","status":"passed","title":"should cache templates after first retrieval"},{"ancestorTitles":["PDFTemplateEngine","template caching"],"duration":0,"failureMessages":[],"fullName":"PDFTemplateEngine template caching should use separate cache entries for different custom templates","status":"passed","title":"should use separate cache entries for different custom templates"},{"ancestorTitles":["PDFTemplateEngine","template caching"],"duration":0,"failureMessages":[],"fullName":"PDFTemplateEngine template caching should clear cache successfully","status":"passed","title":"should clear cache successfully"},{"ancestorTitles":["PDFTemplateEngine","template registration"],"duration":0,"failureMessages":[],"fullName":"PDFTemplateEngine template registration should register custom template successfully","status":"passed","title":"should register custom template successfully"},{"ancestorTitles":["PDFTemplateEngine","template registration"],"duration":0,"failureMessages":[],"fullName":"PDFTemplateEngine template registration should clear cache when registering new template","status":"passed","title":"should clear cache when registering new template"},{"ancestorTitles":["PDFTemplateEngine","available templates"],"duration":0,"failureMessages":[],"fullName":"PDFTemplateEngine available templates should list available templates for document type","status":"passed","title":"should list available templates for document type"},{"ancestorTitles":["PDFTemplateEngine","available templates"],"duration":1,"failureMessages":[],"fullName":"PDFTemplateEngine available templates should include custom templates in available list","status":"passed","title":"should include custom templates in available list"},{"ancestorTitles":["PDFTemplateEngine","available templates"],"duration":0,"failureMessages":[],"fullName":"PDFTemplateEngine available templates should return empty array for unsupported document type","status":"passed","title":"should return empty array for unsupported document type"},{"ancestorTitles":["PDFTemplateEngine","template structure validation"],"duration":0,"failureMessages":[],"fullName":"PDFTemplateEngine template structure validation should have required sections in audit report template","status":"passed","title":"should have required sections in audit report template"},{"ancestorTitles":["PDFTemplateEngine","template structure validation"],"duration":0,"failureMessages":[],"fullName":"PDFTemplateEngine template structure validation should have required sections in SOP template","status":"passed","title":"should have required sections in SOP template"},{"ancestorTitles":["PDFTemplateEngine","template structure validation"],"duration":0,"failureMessages":[],"fullName":"PDFTemplateEngine template structure validation should have valid styling configuration","status":"passed","title":"should have valid styling configuration"},{"ancestorTitles":["PDFTemplateEngine","template structure validation"],"duration":1,"failureMessages":[],"fullName":"PDFTemplateEngine template structure validation should properly merge custom template with defaults","status":"passed","title":"should properly merge custom template with defaults"},{"ancestorTitles":["PDFTemplateEngine","statistics"],"duration":0,"failureMessages":[],"fullName":"PDFTemplateEngine statistics should provide template statistics","status":"passed","title":"should provide template statistics"},{"ancestorTitles":["PDFTemplateEngine","statistics"],"duration":0,"failureMessages":[],"fullName":"PDFTemplateEngine statistics should update statistics when custom templates are added","status":"passed","title":"should update statistics when custom templates are added"},{"ancestorTitles":["PDFTemplateEngine","statistics"],"duration":0,"failureMessages":[],"fullName":"PDFTemplateEngine statistics should track cache size in statistics","status":"passed","title":"should track cache size in statistics"},{"ancestorTitles":["PDFTemplateEngine","edge cases and error handling"],"duration":0,"failureMessages":[],"fullName":"PDFTemplateEngine edge cases and error handling should handle null custom template gracefully","status":"passed","title":"should handle null custom template gracefully"},{"ancestorTitles":["PDFTemplateEngine","edge cases and error handling"],"duration":0,"failureMessages":[],"fullName":"PDFTemplateEngine edge cases and error handling should handle undefined custom template gracefully","status":"passed","title":"should handle undefined custom template gracefully"},{"ancestorTitles":["PDFTemplateEngine","edge cases and error handling"],"duration":0,"failureMessages":[],"fullName":"PDFTemplateEngine edge cases and error handling should handle custom template without sections","status":"passed","title":"should handle custom template without sections"},{"ancestorTitles":["PDFTemplateEngine","edge cases and error handling"],"duration":1,"failureMessages":[],"fullName":"PDFTemplateEngine edge cases and error handling should handle empty sections array","status":"passed","title":"should handle empty sections array"}]}],"config":{"bail":0,"changedFilesWithAncestor":false,"ci":false,"collectCoverage":false,"collectCoverageFrom":["components/**/*.{js,jsx}","pages/**/*.{js,jsx}","contexts/**/*.{js,jsx}","utils/**/*.{js,jsx}","hooks/**/*.{js,jsx}","middleware.js","!**/*.d.ts","!**/node_modules/**","!**/.next/**","!**/coverage/**","!**/*.config.js","!**/jest.setup.js"],"coverageDirectory":"/Users/darrenmorgan/AI_Projects/process-audit-ai/coverage","coverageProvider":"babel","coverageReporters":["json","text","lcov","clover"],"coverageThreshold":{"global":{"branches":70,"functions":70,"lines":70,"statements":70},"components/organization/**/*.js":{"branches":80,"functions":80,"lines":80,"statements":80},"pages/api/organizations/**/*.js":{"branches":85,"functions":85,"lines":85,"statements":85},"pages/api/audit-reports/**/*.js":{"branches":80,"functions":80,"lines":80,"statements":80},"pages/api/automations/**/*.js":{"branches":80,"functions":80,"lines":80,"statements":80},"middleware.js":{"branches":85,"functions":85,"lines":85,"statements":85}},"detectLeaks":false,"detectOpenHandles":false,"errorOnDeprecated":false,"expand":false,"findRelatedTests":false,"forceExit":false,"json":false,"lastCommit":false,"listTests":false,"logHeapUsage":false,"maxConcurrency":5,"maxWorkers":11,"noStackTrace":false,"nonFlagArgs":["__tests__/services/pdf"],"notify":false,"notifyMode":"failure-change","onlyChanged":false,"onlyFailures":false,"openHandlesTimeout":1000,"passWithNoTests":false,"projects":[{"displayName":"Auth Unit Tests","testMatch":["<rootDir>/__tests__/contexts/**/*.(js|jsx)","<rootDir>/__tests__/types/**/*.(js|jsx|ts|tsx)"],"testEnvironment":"jsdom","rootDir":"/Users/darrenmorgan/AI_Projects/process-audit-ai"},{"displayName":"Auth Integration Tests","testMatch":["<rootDir>/__tests__/auth/**/*.(js|jsx)","<rootDir>/__tests__/components/**/*.(js|jsx)"],"testEnvironment":"jsdom","rootDir":"/Users/darrenmorgan/AI_Projects/process-audit-ai"},{"displayName":"Organization Tests","testMatch":["<rootDir>/__tests__/organization/**/*.(js|jsx)"],"testEnvironment":"jsdom","rootDir":"/Users/darrenmorgan/AI_Projects/process-audit-ai"},{"displayName":"Multi-Tenant Integration","testMatch":["<rootDir>/__tests__/multitenant/**/*.test.js"],"testEnvironment":"node","rootDir":"/Users/darrenmorgan/AI_Projects/process-audit-ai"},{"displayName":"Security Tests","testMatch":["<rootDir>/__tests__/integration/security/**/*.test.js"],"testEnvironment":"node","rootDir":"/Users/darrenmorgan/AI_Projects/process-audit-ai"},{"displayName":"Performance Tests","testMatch":["<rootDir>/__tests__/integration/performance/**/*.test.js"],"testEnvironment":"node","rootDir":"/Users/darrenmorgan/AI_Projects/process-audit-ai"},{"displayName":"PDF Generation Tests","testMatch":["<rootDir>/__tests__/services/pdf/**/*.(test|spec).(js|jsx|ts|tsx)","<rootDir>/__tests__/services/sop/**/*.(test|spec).(js|jsx|ts|tsx)"],"testEnvironment":"node","rootDir":"/Users/darrenmorgan/AI_Projects/process-audit-ai"}],"reporters":[["default",{}],["/Users/darrenmorgan/AI_Projects/process-audit-ai/node_modules/jest-html-reporters/index.js",{"publicPath":"./coverage/html-report","filename":"report.html","expand":true}]],"rootDir":"/Users/darrenmorgan/AI_Projects/process-audit-ai","runTestsByPath":false,"seed":1698239951,"skipFilter":false,"snapshotFormat":{"escapeString":false,"printBasicPrototype":false},"testFailureExitCode":1,"testPathPattern":"__tests__/services/pdf","testSequencer":"/Users/darrenmorgan/AI_Projects/process-audit-ai/node_modules/@jest/test-sequencer/build/index.js","testTimeout":10000,"updateSnapshot":"new","useStderr":false,"verbose":true,"watch":false,"watchAll":false,"watchman":true,"workerThreads":false},"endTime":1757544357450,"_reporterOptions":{"publicPath":"./coverage/html-report","filename":"report.html","expand":true,"pageTitle":"","hideIcon":false,"testCommand":"","openReport":false,"failureMessageOnly":0,"enableMergeData":false,"dataMergeLevel":1,"inlineSource":false,"urlForTestFiles":"","darkTheme":false,"includeConsoleLog":false,"stripSkippedTest":false},"logInfoMapping":{},"attachInfos":{}})